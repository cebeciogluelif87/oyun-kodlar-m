<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>TavÅŸanÄ±n HavuÃ§ MacerasÄ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .game-cell {
            width: 80px;
            height: 80px;
            border: 2px solid #8B4513;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #90EE90, #98FB98);
        }
        .obstacle {
            background: linear-gradient(45deg, #654321, #8B4513) !important;
            border-radius: 8px;
        }
        .rabbit {
            animation: bounce 0.5s ease-in-out;
        }
        .carrot-basket {
            animation: sway 2s ease-in-out infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes sway {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }
        .win-animation {
            animation: celebrate 1s ease-in-out infinite;
        }
        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }
        .talking-rabbit {
            width: 160px;
            height: 160px;
        }
        .sound-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-200 to-green-200 min-h-screen p-4">
    <!-- Ses Kontrol Butonu -->
    <button id="soundToggle" class="sound-btn px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors">
        ðŸ”ŠSes AÃ§Ä±k
    </button>

    <div class="max-w-4xl mx-auto">
        <!-- Baï¿½lï¿½k ve Seviye Seï¿½imi -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-green-800 mb-6">TavÅŸanÄ±n HavuÃ§ MacerasÄ±</h1>
            
            <!-- Oyun Baï¿½langÝ Ekranï¿½ -->
            <div id="startScreen" class="bg-white rounded-xl p-8 shadow-lg">
                <div class="mb-6 flex flex-col items-center">
                    <!-- Konuï¿½an Tavï¿½an -->
                    <img id="talkingRabbit" src="6.png" alt="Tavï¿½an" class="talking-rabbit mb-4" onerror="this.style.display='none';">
                    
                    <div class="text-2xl mb-4"></div>
                    
                    <!-- Havuï¿½ Sepeti -->
                    <img src="1.png" alt="Havuï¿½ Sepeti" width="80" height="80" onerror="this.style.display='none';">
                </div>
                
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">Zorluk Seviyesi SeÃ§in:</h3>
                    <div class="flex justify-center gap-4">
                        <button onclick="selectLevel('easy')" id="easyBtn" class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors" onmouseenter="playSound('kolay.mp3')">
                            Kolay
                        </button>
                        <button onclick="selectLevel('medium')" id="mediumBtn" class="px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-semibold transition-colors" onmouseenter="playSound('orta.mp3')">
                            Orta
                        </button>
                        <button onclick="selectLevel('hard')" id="hardBtn" class="px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors" onmouseenter="playSound('zor.mp3')">
                            Zor
                        </button>
                    </div>
                </div>
                
                <button onclick="startGame()" id="startBtn" class="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white text-xl rounded-lg font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled onmouseenter="playSound('baslat.mp3')">
                    BaÅŸlat
                </button>
            </div>
        </div>

        <!-- Oyun Alanï¿½ -->
        <div id="gameArea" class="hidden">
            <div class="text-center mb-4">
                <div id="levelDisplay" class="text-2xl font-bold text-green-800 mb-2"></div>
                <button onclick="resetGame()" class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors">
                    Yeniden BaÅŸla
                </button>
            </div>

            <!-- Oyun Tahtasï¿½ -->
            <div class="flex justify-center mb-6">
                <div id="gameBoard" class="grid grid-cols-5 gap-1 p-4 bg-brown-600 rounded-xl shadow-lg" style="background-color: #8B4513;">
                </div>
            </div>

            <!-- Kontrol Butonlarï¿½ -->
            <div class="flex justify-center">
                <div class="grid grid-cols-3 gap-2">
                    <div></div>
                    <button onclick="moveRabbit('up', true)" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l8 8H4l8-8z"/>
                        </svg>
                    </button>
                    <div></div>
                    <button onclick="moveRabbit('left', true)" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4 12l8-8v16l-8-8z"/>
                        </svg>
                    </button>
                    <div></div>
                    <button onclick="moveRabbit('right', true)" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 12l-8 8V4l8 8z"/>
                        </svg>
                    </button>
                    <div></div>
                    <button onclick="moveRabbit('down', true)" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 20l-8-8h16l-8 8z"/>
                        </svg>
                    </button>
                    <div></div>
                </div>
            </div>
        </div>

        <!-- Kazanma Ekranï¿½ -->
        <div id="winScreen" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
            <div class="bg-white rounded-xl p-8 text-center shadow-2xl">
                <div class="mb-4">
                    <img src="odul.gif" alt="ï¿½dï¿½l" class="w-full h-auto max-w-xs mx-auto" onerror="this.style.display='none';">
                </div>
                <h2 class="text-3xl font-bold text-green-600 mb-4">Tebrikler!</h2>
                <p class="text-xl text-gray-700 mb-6">Havucuma kavuÅŸtum.</p>
                <div class="flex justify-center items-center mb-6">
                    <img id="winRabbitImg" src="3.png" alt="Mutlu Tavï¿½an" width="60" height="60" onerror="this.style.display='none';">
                </div>
                <button onclick="resetGame()" onmouseenter="playSound('tekrar.mp3')" class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors">
                    Tekrar Oyna
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = null;
        let rabbitPosition = 0;
        let obstacles = [];
        let soundEnabled = true;
        let talkingInterval = null;
        
        const levelObstacles = {
            easy: [],
            medium: [6, 11, 13, 17, 21],
            hard: [3, 7, 9, 15, 17, 19, 21]
        };

        // Ses kontrol fonksiyonu
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const soundBtn = document.getElementById('soundToggle');
            soundBtn.innerHTML = soundEnabled ? 'ðŸ”Š Ses AÃ§Ä±k' : ' ðŸ”‡ Ses KapalÄ±';
            
            // Eï¿½er ses kapatï¿½ldï¿½ysa konuï¿½ma sesini ve animasyonunu durdur
            if (!soundEnabled) {
                if (talkingAudio) {
                    talkingAudio.pause();
                    talkingAudio.currentTime = 0;
                }
                stopTalkingAnimation();
            } else {
                // Ses aï¿½ï¿½ldï¿½ysa ve baï¿½langÝ ekranï¿½ndaysak konuï¿½ma animasyonunu baï¿½lat
                if (!document.getElementById('startScreen').classList.contains('hidden')) {
                    startTalkingAnimation();
                }
            }
        }

        // Ses ï¿½alma fonksiyonu
        function playSound(filename) {
            if (!soundEnabled) return;
            
            try {
                const audio = new Audio(filename);
                audio.volume = 0.5;
                audio.play().catch(e => {
                    console.log('Ses ï¿½alï¿½namadï¿½:', e);
                });
            } catch (e) {
                console.log('Ses dosyasï¿½ bulunamadï¿½:', filename);
            }
        }

        // Konuï¿½ma animasyonu
        let talkingAudio = null;
        
        function startTalkingAnimation() {
            const rabbitImg = document.getElementById('talkingRabbit');
            let isImage6 = true;
            
            // Konuï¿½ma sesini ï¿½al
            if (soundEnabled) {
                try {
                    talkingAudio = new Audio('konusma.mp3');
                    talkingAudio.volume = 0.7;
                    
                    // Ses bittiï¿½inde animasyonu durdur
                    talkingAudio.addEventListener('ended', () => {
                        stopTalkingAnimation();
                    });
                    
                    talkingAudio.play().catch(e => {
                        console.log('Konuï¿½ma sesi ï¿½alï¿½namadï¿½:', e);
                    });
                } catch (e) {
                    console.log('Konuï¿½ma ses dosyasï¿½ bulunamadï¿½');
                }
            }
            
            talkingInterval = setInterval(() => {
                rabbitImg.src = isImage6 ? '7.png' : '6.png';
                isImage6 = !isImage6;
            }, 400);
        }

        function stopTalkingAnimation() {
            if (talkingInterval) {
                clearInterval(talkingInterval);
                talkingInterval = null;
                document.getElementById('talkingRabbit').src = '6.png';
            }
        }

        function selectLevel(level) {
            currentLevel = level;
            
            // Buton stillerini gï¿½ncelle
            document.querySelectorAll('#startScreen button').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-300');
            });
            
            if (level === 'easy') {
                document.getElementById('easyBtn').classList.add('ring-4', 'ring-blue-300');
            } else if (level === 'medium') {
                document.getElementById('mediumBtn').classList.add('ring-4', 'ring-blue-300');
            } else if (level === 'hard') {
                document.getElementById('hardBtn').classList.add('ring-4', 'ring-blue-300');
            }
            
            document.getElementById('startBtn').disabled = false;
        }

        function startGame() {
            if (!currentLevel) return;
            
            stopTalkingAnimation();
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            
            obstacles = levelObstacles[currentLevel];
            rabbitPosition = 0;
            
            const levelNames = {
                easy: 'Kolay Seviye',
                medium: 'Orta Seviye',
                hard: 'Zor Seviye'
            };
            
            document.getElementById('levelDisplay').textContent = levelNames[currentLevel];
            
            createGameBoard();
        }

        function createGameBoard() {
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'game-cell';
                cell.id = `cell-${i}`;
                
                if (obstacles.includes(i)) {
                    cell.classList.add('obstacle');
                } else if (i === 0) {
                    cell.innerHTML = '<div class="rabbit"><img src="6.png" alt="Tavï¿½an" width="60" height="60" onerror="this.style.display=\'none\';"></div>';
                } else if (i === 24) {
                    cell.innerHTML = '<div class="carrot-basket"><img src="1.png" alt="Havuï¿½ Sepeti" width="60" height="60" onerror="this.style.display=\'none\';"></div>';
                }
                
                gameBoard.appendChild(cell);
            }
        }

        // Yeme animasyonu fonksiyonu
        function playEatingAnimation(cell) {
            const eatingSequence = ['5.png', '4.png', '3.png', '2.png'];
            let currentFrame = 0;
            
            function showNextFrame() {
                if (currentFrame < eatingSequence.length) {
                    cell.innerHTML = `<div class="rabbit"><img src="${eatingSequence[currentFrame]}" alt="Tavï¿½an Yiyor" width="60" height="60" onerror="this.style.display='none';"></div>`;
                    currentFrame++;
                    setTimeout(showNextFrame, 300); // Her kare 300ms
                } else {
                    // Animasyon bitti, kazanma ekranï¿½nï¿½ gï¿½ster
                    setTimeout(() => {
                        showWinScreen();
                    }, 200);
                }
            }
            
            showNextFrame();
        }

        // Kazanma ekranï¿½nï¿½ gï¿½ster ve tebrik sesini ï¿½al
        function showWinScreen() {
            document.getElementById('winScreen').classList.remove('hidden');
            
            // Tebrik sesini ï¿½al
            if (soundEnabled) {
                try {
                    const congratsAudio = new Audio('tebrik.mp3');
                    congratsAudio.volume = 0.7;
                    congratsAudio.play().catch(e => {
                        console.log('Tebrik sesi ï¿½alï¿½namadï¿½:', e);
                    });
                } catch (e) {
                    console.log('Tebrik ses dosyasï¿½ bulunamadï¿½');
                }
            }
            
            // Kazanma ekranï¿½ndaki tavï¿½an resmini 3.png yap
            const winRabbitImg = document.getElementById('winRabbitImg');
            if (winRabbitImg) {
                winRabbitImg.src = '3.png';
            }
        }

        function moveRabbit(direction, playDirectionSound = false) {
            const currentRow = Math.floor(rabbitPosition / 5);
            const currentCol = rabbitPosition % 5;
            let newPosition = rabbitPosition;
            
            // Yï¿½n seslerini sadece buton tï¿½klamasï¿½nda ï¿½al
            if (playDirectionSound) {
                switch (direction) {
                    case 'up':
                        playSound('yukari.mp3');
                        break;
                    case 'down':
                        playSound('asagi.mp3');
                        break;
                    case 'left':
                        playSound('sol.mp3');
                        break;
                    case 'right':
                        playSound('sag.mp3');
                        break;
                }
            }
            
            switch (direction) {
                case 'up':
                    if (currentRow > 0) newPosition = rabbitPosition - 5;
                    break;
                case 'down':
                    if (currentRow < 4) newPosition = rabbitPosition + 5;
                    break;
                case 'left':
                    if (currentCol > 0) newPosition = rabbitPosition - 1;
                    break;
                case 'right':
                    if (currentCol < 4) newPosition = rabbitPosition + 1;
                    break;
            }
            
            // Engel kontrolï¿½
            if (obstacles.includes(newPosition)) {
                return;
            }
            
            // Eski pozisyonu temizle
            const oldCell = document.getElementById(`cell-${rabbitPosition}`);
            oldCell.innerHTML = '';
            
            // Yeni pozisyona tavï¿½anï¿½ koy
            rabbitPosition = newPosition;
            const newCell = document.getElementById(`cell-${rabbitPosition}`);
            
            if (rabbitPosition === 24) {
                // Kazandï¿½! Yeme animasyonu baï¿½lat
                newCell.innerHTML = '';
                playEatingAnimation(newCell);
            } else {
                newCell.innerHTML = '<div class="rabbit"><img src="6.png" alt="Tavï¿½an" width="60" height="60" onerror="this.style.display=\'none\';"></div>';
            }
        }

        function resetGame() {
            stopTalkingAnimation();
            document.getElementById('winScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            
            currentLevel = null;
            rabbitPosition = 0;
            obstacles = [];
            
            // Buton stillerini sï¿½fï¿½rla
            document.querySelectorAll('#startScreen button').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-300');
            });
            document.getElementById('startBtn').disabled = true;
            
            // Konuï¿½ma animasyonunu ve sesini baï¿½latma
        }

        // Ses kontrol butonu event listener
        document.getElementById('soundToggle').addEventListener('click', toggleSound);

        // Klavye kontrolï¿½
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('gameArea').classList.contains('hidden')) return;
            
            switch(event.key) {
                case 'ArrowUp':
                    event.preventDefault();
                    playSound('yukari.mp3');
                    moveRabbit('up');
                    break;
                case 'ArrowDown':
                    event.preventDefault();
                    playSound('asagi.mp3');
                    moveRabbit('down');
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    playSound('sol.mp3');
                    moveRabbit('left');
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    playSound('sag.mp3');
                    moveRabbit('right');
                    break;
            }
        });

        // Sayfa yï¿½klendiï¿½inde konuï¿½ma animasyonunu baï¿½lat
        window.addEventListener('load', function() {
            startTalkingAnimation();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97965ce3f2f49862',t:'MTc1NjkxNDIwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
